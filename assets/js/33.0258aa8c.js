(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{557:function(e,s,t){"use strict";t.r(s);var v=t(2),r=Object(v.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[e._v("#")]),e._v(" 背景")]),e._v(" "),s("p",[e._v("使用 "),s("code",[e._v("VuePress")]),e._v(" + "),s("code",[e._v("Github Actions")]),e._v(" 搭建一个个人博客，记录日常琐事或开发技术积累。")]),e._v(" "),s("h3",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://www.vuepress.cn/",target:"_blank",rel:"noopener noreferrer"}},[e._v("VuePress 中文文档"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub Actions 入门教程"),s("OutboundLink")],1)])])]),e._v(" "),s("h3",{attrs:{id:"基本配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[e._v("#")]),e._v(" 基本配置")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"title"}),s("p",[s("code",[e._v("node")]),e._v(" 版本需要12以上，版本不符合要求会导致 "),s("code",[e._v("vuepress")]),e._v(" 模块安装失败。另外，windows平台升级 "),s("code",[e._v("node")]),e._v(" 只能通过官网下载目标版本重新安装的方式。")])]),s("p",[e._v("构建的核心基本就是 "),s("code",[e._v("docs/.vuepress/")]),e._v(" 目录下的 "),s("code",[e._v("config.js")]),e._v("，是配置文件的入口文件。")]),e._v(" "),s("p",[e._v("以下列出几点在配置过程中容易踩坑的点～")]),e._v(" "),s("ol",[s("li",[s("code",[e._v("base")])])]),e._v(" "),s("p",[e._v("是部署站点的基础路径。")]),e._v(" "),s("p",[e._v("如果要将网站部署到 "),s("code",[e._v("https://owner.github.io")]),e._v("，那么 "),s("code",[e._v("base")]),e._v(" 应该被设置成 "),s("code",[e._v('"/"')]),e._v("（或者不设置，此为默认值），它的值应当总是以斜杠开始，并以斜杠结束。")]),e._v(" "),s("p",[e._v("如果部署到 "),s("code",[e._v("https://owner.github.io/home/")]),e._v("，那么 "),s("code",[e._v("base")]),e._v(" 就应该被设置成 "),s("code",[e._v("/home/")]),e._v("。否则会导致 "),s("code",[e._v("css")]),e._v("、图片等静态资源无法被正确加载。")]),e._v(" "),s("p",[s("code",[e._v("base")]),e._v(" 将会作为前缀自动地插入到所有以 "),s("code",[e._v("/")]),e._v(" 开始的其他选项的链接中，因此只需要指定一次。")]),e._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[e._v("themeConfig.sidebar")])])]),e._v(" "),s("p",[s("code",[e._v("themeConfig")]),e._v(" 可以为当前的主题提供一些配置，这些选项依赖于你正在使用的主题。")]),e._v(" "),s("p",[e._v("因本 blog 暂时采用的是默认主题，因此此处讨论的是关于修改默认的主题配置。")]),e._v(" "),s("p",[e._v("按照 "),s("code",[e._v("VuePress")]),e._v(" 官网文档修改侧边栏分组的配置，关键在于 "),s("code",[e._v("children")]),e._v(" 下的值使用的是 "),s("code",[e._v("绝对路径")]),e._v("，而不是 "),s("code",[e._v("相对路径")]),e._v("。如 "),s("code",[e._v('"/"')]),e._v("指向根目录下的 "),s("code",[e._v("README.md")]),e._v("，而"),s("code",[e._v('"/foo/bar"')]),e._v("则是指向 "),s("code",[e._v("foo")]),e._v(" 目录下的 "),s("code",[e._v("bar.md")]),e._v("。")]),e._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[e._v("侧边栏的标题自动抓取的是对应 "),s("code",[e._v(".md")]),e._v(" 文件的 "),s("code",[e._v("h2")]),e._v("、"),s("code",[e._v("h3")]),e._v(" 标题，如果没有，默认显示 "),s("code",[e._v("文件路径.html")]),e._v("。")])]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[s("code",[e._v("github Pages")]),e._v(" 可以被认为是用户编写的、托管在 github 上的静态网页。"),s("code",[e._v("github Actions")]),e._v(" 可以理解为持续集成过程中的某个操作，比如抓取代码、运行测试、登录远程服务器，发布到第三方服务等等。要使用 github Actions 配套的自动构建发布功能，仓库需要包含 GitHub Actions 的配置文件（workflow 文件），存放在仓库的 "),s("code",[e._v(".github/workflows")]),e._v(" 目录。workflow 文件采用 YAML 格式，文件名可以任意取，但是后缀名统一为 "),s("code",[e._v(".yml")]),e._v("，比如 "),s("code",[e._v("foo.yml")]),e._v("。一个库可以有多个 workflow 文件。GitHub 只要发现 .github/workflows 目录里面有 .yml 文件，就会自动运行该文件。")])]),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[e._v("关于 "),s("code",[e._v("JamesIves/github-pages-deploy-action@releases/v3")]),e._v(" 这个 action 中 "),s("code",[e._v("FOLDER")]),e._v(" 的取值，应该为绝对路径。由于 vuepress 默认的打包文件路径为 "),s("code",[e._v(".vuepress/dist")]),e._v("，因此这里应该对应修改为 "),s("code",[e._v("docs/.vuepress/dist")]),e._v("。如果你在 vuepress 的配置文件中修改了默认打包路径（配置项为 "),s("code",[e._v("dest")]),e._v("），那么这里也需要对应修改。")])]),e._v(" "),s("li",[s("p",[s("s",[e._v("评论功能使用的是"),s("code",[e._v("github")]),e._v("提供的"),s("code",[e._v("OAuth API")]),e._v("搭配评论插件"),s("code",[e._v("Vssue")]),e._v("，将评论存储在"),s("code",[e._v("github Issue")]),e._v("系统中，并在当前页面展示。")])]),e._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[e._v("See More")]),e._v(" "),s("p",[e._v("因评论功能在github授权登录重定向至评论页面时，一直初始化失败，无赖放弃。")]),e._v(" "),s("p",[s("code",[e._v("https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token")]),e._v(" 请求失败")]),e._v(" "),s("p",[e._v("依赖包："),s("br"),e._v(" "),s("code",[e._v("@vssue/vuepress-plugin-vssue")]),s("br"),e._v(" "),s("code",[e._v("@vssue/api-github-v3")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://vssue.js.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vssue 官网"),s("OutboundLink")],1)])])]),e._v(" "),s("li",[s("p",[e._v("使用 "),s("code",[e._v("vuepress-theme-reco")]),e._v(" 主题内集成的评论功能 "),s("code",[e._v("Valine")]),e._v("。侧边栏需显示声明。")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"title"}),s("p",[e._v("从 1.5.6 之后，主题将原有的侧边栏的中的多级标题移出，生成子侧边栏，放在页面的右侧。左边的侧边栏只有在自定义的侧边栏时才会出现，用于展示多篇文章的集合，而子侧边栏专注于当前文章的多级标题。")])]),s("p",[s("a",{attrs:{href:"https://vuepress-reco-doc.vercel.app/",target:"_blank",rel:"noopener noreferrer"}},[e._v("vuepress-theme-reco"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://valine.js.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Valine"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[e._v("自动构建发布报错")])])]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ***.github.io@1.0.0 build\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" vuepress build docs\n/home/runner/work/***.github.io/***.github.io/node_modules/vue-server-renderer/index.js:8\n  throw new Error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n  ^\nError: \nVue packages version mismatch:\n- vue@2.7.8\n- vue-server-renderer@2.7.4\nThis may cause things to work incorrectly. Make sure to use the same version "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" both.\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[e._v("解决方案：delete lock file and node_modules foler, and then run "),s("code",[e._v("yarn")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/nuxt/nuxt.js/issues/6823",target:"_blank",rel:"noopener noreferrer"}},[e._v("related issue"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[e._v("#")]),e._v(" 其它")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("Emoji"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);