(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{548:function(t,e,r){"use strict";r.r(e);var v=r(2),_=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"rpc是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rpc是什么"}},[t._v("#")]),t._v(" RPC是什么")]),t._v(" "),e("p",[t._v("RPC 的全称是 Remote Procedure Call （远程过程调用），是一种"),e("strong",[t._v("进程间通信方式")]),t._v("。它允许程序调用另一个地址空间的过程或函数，而不用程序员显式编码这个远程调用的细节，程序员无论是调用本地的还是远程的，本质上编写的调用代码基本相同。")]),t._v(" "),e("p",[t._v('RPC 这个概念术语在上世纪 80 年代由 Bruce Jay Nelson 在论文 "Implementing Remote Procedure Calls" 中提出的，文中指出实现 RPC 的程序包括 5 个部分：')]),t._v(" "),e("ol",[e("li",[t._v("User 是调用方")]),t._v(" "),e("li",[t._v("User-stub 负责将调用的接口、方法和参数通过约定的协议规范进行编码")]),t._v(" "),e("li",[t._v("RPCRuntime 负责将本地数据传输到远端的RPCRuntime")]),t._v(" "),e("li",[t._v("Server-stub 负责根据约定的协议规范进行解码")]),t._v(" "),e("li",[t._v("Server 是被调用方")])]),t._v(" "),e("p",[t._v("因此，实现 RPC 协议的两大要素即为 序列化协议（User-stub、Server-stub）和 传输协议（RPCRuntime）。")]),t._v(" "),e("p",[t._v("因为 RPC 本质上是进程间通信，而“本地调用和远程调用的对比”实际上就是“进程内通信和进程间通信的对比”。远程调用中的传输协议利用字节流传输，可以是应用层协议或者传输层协议。")]),t._v(" "),e("h3",{attrs:{id:"如何实现单点式和分布式rpc框架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何实现单点式和分布式rpc框架"}},[t._v("#")]),t._v(" 如何实现单点式和分布式RPC框架")]),t._v(" "),e("p",[t._v("最基本的RPC框架就是单点式的，因为A服务直接调用B服务，不经过第三方，这种是最简单的。但是必须是A和B同时部署一套，A1只能调用B1，A2只能调用B2。")]),t._v(" "),e("p",[t._v("假设现在B服务出现了性能瓶颈，部署多台B服务的同时，也只能部署多台A服务，很浪费资源。")]),t._v(" "),e("p",[t._v("所以需要一台A服务对多台B服务，利用第三方服务(注册中心)找到其他B服务，而不是写死B服务的地址。这种RPC才是分布式RPC，也是业内主流。")]),t._v(" "),e("p",[t._v("由此可以看出，实现分布式RPC框架，除了单点式需要的序列化协议和传输协议外，还依赖于服务注册中心。实际上在生产环境中，我们需要实时监控服务的调用情况，所以还需要一个微服务管理中心，甚至是一个自动化运维的管理中心。")]),t._v(" "),e("p",[t._v("另外，跨语言支持也是评价一个分布式RPC框架是否合格的考量点。")]),t._v(" "),e("h3",{attrs:{id:"推荐阅读"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#推荐阅读"}},[t._v("#")]),t._v(" 推荐阅读")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://mp.weixin.qq.com/s/qmnfmUCdekEt1xG0hp_4MQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("既然有 HTTP 协议，为什么还要有 RPC？"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=_.exports}}]);